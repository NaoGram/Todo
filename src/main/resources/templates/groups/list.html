<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">

<head>
	<title>Todo</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<script type="text/javascript" src="http://code.jquery.com/jquery-2.2.3.min.js"></script>
	<link rel="stylesheet" type="text/css" href="../bootstrap-datepicker-1.6.4-dist/css/bootstrap-datepicker.min.css">
	<script type="text/javascript" src="../bootstrap-datepicker-1.6.4-dist/js/bootstrap-datepicker.min.js"></script>
	<script type="text/javascript"
		src="../bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.ja.min.js"></script>
</head>

<body>
	<div class="group-list-wrapper text-center" layout:fragment="contents">
		<div style="padding: 30px;"></div>
		<div class="container">
			<div class="main-content">

				<!--タイトル -->
				<div class="Title">
					<h1>Group list</h1>
				</div>

				<div class="row">
					<div class="col-md-8 offset-md-2">







						<form class="new_topic" id="new_topic" method="post" action="/topic"
							enctype="multipart/form-data">



							<div class="mb-3">


								<label class="form-label text-black" for="topic_description">グループ一覧</label>
								<br>
								<label class="selectbox-3">
									</label>
									
									
									<div th:each="group : ${taskGroups}">
									<div class="group-item">

										<!-- アコーディオン -->
										<div class="accordion" th:id="'accordionExample' + ${group.group.id}">
									
								<button class="accordion-button" type="button" data-bs-toggle="collapse"
									th:data-bs-target="'#collapse' + ${group.group.id}" aria-expanded="true"
									aria-controls="collapseOne" th:style="'background-color: ' + ${group.color}">
									<!-- タスクグループの領域 -->


									<div class="task">
										<p th:text="${group.group_name}"></p>
									</div>
								</button>
							</div>
					</div>

					<div th:id="'collapse' + ${group.group.id}" class="accordion-collapse collapse show"
						th:aria-labelledby="'heading' + ${group.group.id}"
						th:data-bs-parent="'accordionExample' + ${group.group.id}" style="background-color: #64c0fa;">
						<!-- アコーディオン展開した時のボタン -->
						<button class="btn btn-warning" th:attr="onclick='editTask(' + ${group.group.id} + ');'"><i
								class="bi bi-pencil"></i></button>
						<button class="btn btn-danger" th:onclick="onclick='deleteTask(' + ${group.group.id} + ');'"><i
								class="bi bi-trash"></i></button>
					</div>
				</div>
				<br>


				</form>
			</div>
		</div>
		<script>

			function editTask(taskId) {
				console.log("click");
				window.location.href = '/Tasks/edit/' + taskId;
			}

			function deleteTask(taskId) {
				window.location.href = '/Tasks/delete/' + taskId;
			}

			$(function () {
				$("button").click(function (e) {
					console.log("click")
					$(`#${e.target.dataset.targetId}`).slideToggle();
				});
			});
		</script>
	</div>
	</div>
	</div>
</body>

</html>